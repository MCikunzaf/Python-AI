# PyAI - 本地规则与联网搜索相结合的AI助手

PyAI是一个智能助手，结合了本地规则匹配和联网搜索功能，既可以在无网络环境下工作，也能在需要时通过网络提供更广泛的知识。

## 项目特点

- **混合知识源**：结合本地规则匹配和联网搜索功能
- **智能搜索触发**：当本地规则无法回答时，自动尝试联网搜索
- **全部搜索引擎**：支持必应、百度、菜鸟教程、hao123、360搜索等多个搜索引擎
- **回退搜索机制**：所有不认识的问题都会自动进行网络搜索，不再返回默认的"不知道"回复
- **自定义控制**：可随时启用或禁用搜索功能
- **丰富的知识问答**：包含自然科学、技术、历史文化等多领域知识
- **完全本地运行选项**：在禁用搜索时，完全不依赖网络
- 📱 **本地运行** - 完全在本地运行，不需要联网或外部API
- 🐍 **纯Python实现** - 只使用Python标准库，搜索功能需要额外依赖
- 💬 **多语言支持** - 支持中文和英文基本对话
- ⚡ **轻量级** - 代码简洁，启动快速
- 📝 **可扩展** - 可以方便地添加新的对话规则
- 🎨 **友好界面** - 提供命令行界面，支持丰富的交互功能

## 项目结构

```
Pyai/
├── src/                 # 源代码目录
│   ├── ai_core.py       # AI核心逻辑，包含规则和响应处理
│   ├── main.py          # 主程序入口，命令行界面
│   └── search_engine.py # 搜索引擎实现
├── config/              # 配置文件目录
│   └── config.py        # 项目配置文件
├── models/              # 模型目录（预留）
├── requirements.txt     # Python依赖包列表
├── test_all_search.py   # 全部搜索引擎模式测试
├── test_fallback_search.py # 回退搜索功能测试
├── test_full_flow.py    # 完整流程测试
└── conversations/       # 对话历史保存目录（自动创建）
```

## 快速开始

### 前置条件

- Python 3.6 或更高版本
- 基本功能：无需安装额外依赖
- 搜索功能：通过以下命令安装依赖
  ```bash
  pip install -r requirements.txt
  ```

### 运行程序

1. 确保你已经安装了Python

2. 进入项目目录

```bash
cd g:\Desktop\Pyai
```

3. （可选）安装搜索功能依赖：
   ```bash
   pip install requests beautifulsoup4
   ```

4. 运行主程序

```bash
python src\main.py
```

或者

```bash
cd src
python main.py
```

## 使用说明

启动程序后，你将看到一个命令行界面，可以直接与AI助手进行对话。

### 基本命令

- `帮助` - 显示详细的使用说明
- `清除` - 清除屏幕内容
- `历史` - 显示当前对话历史
- `保存` - 将当前对话保存到文件
- `时间` - 显示当前系统时间
- `添加规则` - 添加自定义对话规则
- `退出` 或 `exit` - 退出程序

### 搜索功能命令

- `搜索状态` - 显示当前搜索功能的启用状态
- `启用搜索` - 启用联网搜索功能
- `禁用搜索` - 禁用联网搜索功能，仅使用本地规则
- `/Internet on` - 启用搜索功能
- `/Internet off` - 禁用搜索功能
- `/Internet all` - 启用全部搜索引擎模式，获取更全面的搜索结果

### 对话示例

```
===================================
      本地简单AI助手  v1.0.0
===================================
一个简单的本地AI助手，完全不依赖外部服务
输入 '帮助' 获取使用说明
输入 '退出' 或 'exit' 结束程序
===================================
AI: 你好！我是一个简单的本地AI助手。有什么我可以帮助你的吗？

你: 你好
AI: 嗨！很高兴见到你。

你: 你是谁
AI: 我是一个运行在你电脑上的AI程序。

你: 讲个笑话
AI: 为什么计算机永远不会感冒？因为它们有防火墙！

你: 谢谢
AI: 不客气！

你: 退出
AI: 谢谢使用，再见！
```

## 支持的话题

### 本地规则支持的话题

PyAI内置了丰富的知识问答规则，包括：

- **自然科学**：
  - 物理：牛顿运动定律、爱因斯坦相对论、量子力学、热力学定律
  - 化学：元素周期表、化学反应类型、有机化学基础
  - 天文学：太阳系、黑洞、宇宙大爆炸、星座知识
  
- **科学技术**：
  - 计算机科学：编程语言、算法、数据结构、人工智能基础
  - 互联网：TCP/IP协议、HTTP、云计算、区块链
  - 电子产品：手机原理、电脑硬件、传感器技术
  
- **历史文化**：
  - 历史事件：古代文明、世界大战、中国历史朝代
  - 文化常识：节日习俗、艺术流派、文学经典
  
- **地理知识**：
  - 世界地理：大洲大洋、国家首都、著名山脉河流
  - 中国地理：省份城市、地形地貌、气候特点
  
- **数学知识**：
  - 基础数学：代数、几何、微积分初步
  - 统计概率：基本概念、常用分布
  
- **生物知识**：
  - 生物学基础：细胞结构、DNA、进化论
  - 人体科学：系统结构、健康常识
  
- **其他常识**：
  - 日常问候和自我介绍
  - 感谢和道歉表达
  - 情感表达和感受
  - 兴趣爱好交流
  - 简单的时间查询

### 搜索功能

当本地规则无法回答问题时，PyAI会自动尝试通过网络搜索获取相关信息。搜索功能可以回答更广泛的问题，包括：

- 最新新闻和事件
- 专业领域的详细知识
- 具体的事实查询
- 实时数据和信息

## 扩展AI功能

你可以通过以下方式扩展AI助手的功能：

### 1. 使用命令行添加规则

在程序运行时，输入 `添加规则` 命令，然后按照提示添加新的关键词和响应。

### 2. 直接修改代码

编辑 `src/ai_core.py` 文件，在 `self.rules` 字典中添加新的规则：

```python
# 添加新规则的格式
self.rules["新的关键词"] = ["响应1", "响应2", "响应3"]
```

### 3. 搜索功能定制

要定制搜索功能，可以修改 `src/search_engine.py` 文件中的相关参数：

- 搜索引擎配置
- 搜索结果处理方式
- 错误处理策略

## 自定义和配置

### 通过配置文件修改设置

现在可以通过编辑 `config/config.py` 文件来配置程序的各种参数：

- 搜索引擎配置（超时时间、结果数量等）
- AI配置（默认搜索模式、是否启用搜索等）
- 应用配置（应用名称、版本号等）

### 修改程序设置

你还可以在 `main.py` 文件中修改一些基本设置，如：

- `version` - 程序版本号
- `name` - 程序名称
- 打字机效果的延迟时间等

### 搜索功能配置

搜索功能默认在安装依赖后自动启用，但可以通过以下方式控制：

1. 运行时使用命令行指令 `启用搜索`、`禁用搜索` 或 `/Internet` 相关命令
2. 在代码中通过 `set_search_enabled()` 方法控制
3. 在配置文件中设置默认行为

### 依赖管理

如果不需要搜索功能，可以不安装相关依赖，PyAI会自动检测并在缺少依赖时禁用搜索功能。

### 保存对话历史

程序支持将对话历史保存到 `conversations` 目录，文件名包含时间戳，方便查看历史记录。

## 注意事项

- 这是一个基于规则的简单AI，不具备真正的理解能力
- 响应基于关键词匹配，可能无法准确理解复杂的问题
- 自定义规则时，关键词越具体，匹配越准确
- 程序会自动创建必要的目录（如conversations）

## 故障排除

### 程序无法启动
- 确保Python已正确安装
- 检查文件路径是否正确

### 响应不准确
- 尝试使用更具体的关键词
- 添加自定义规则来改进响应

### 保存对话失败
- 检查程序是否有写入文件的权限
- 确保磁盘有足够空间

### 搜索功能不可用
- 确保已安装依赖：`pip install requests beautifulsoup4`
- 检查网络连接是否正常
- 使用 `搜索状态` 命令查看搜索功能的当前状态

## 贡献

你可以通过以下方式贡献这个项目：

1. 添加更多实用的对话规则
2. 改进匹配算法，使响应更准确
3. 添加新功能，如学习能力、记忆功能等

## 许可证

这个项目仅供学习和个人使用。

## 更新日志

### v1.2.0
- 添加完整的配置文件系统，支持集中化配置管理
- 实现"全部不会的都改成联网搜索"功能，不再返回默认的"不知道"回复
- 支持全部搜索引擎模式，可同时使用多个搜索引擎
- 添加requirements.txt文件，统一依赖管理
- 清理和优化测试文件，保留核心测试脚本

### v1.1.0
- 大幅扩展知识问答规则库
- 添加联网搜索功能，支持更广泛的问题回答
- 新增搜索功能控制命令
- 改进命令行界面，支持搜索状态显示
- 添加依赖检测和自动功能降级

### v1.0.0
- 初始版本
- 实现基本的规则型对话系统
- 添加命令行交互界面
- 支持保存对话历史
- 添加自定义规则功能

## 联系信息

如果你有任何问题或建议，请随时提出。

---

感谢使用本地简单AI助手！希望它能为你提供帮助和乐趣！
"# Python-AI" 
"# Python-AI" 
